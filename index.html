<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>üçî ÌñÑÎ≤ÑÍ±∞ Í∞ÄÍ≤å Í≤åÏûÑ</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Arial', sans-serif;
    background: #D2691E;
    overflow: hidden;
    height: 100vh;
    position: relative;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
}

body::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
        repeating-linear-gradient(
            90deg,
            transparent,
            transparent 60px,
            rgba(0,0,0,0.03) 60px,
            rgba(0,0,0,0.03) 61px
        ),
        repeating-linear-gradient(
            0deg,
            transparent,
            transparent 60px,
            rgba(0,0,0,0.03) 60px,
            rgba(0,0,0,0.03) 61px
        ),
        linear-gradient(180deg,
            #FF8C00 0%,
            #FFA500 20%,
            #FF8C00 40%,
            #D2691E 60%,
            #A0522D 80%,
            #8B4513 100%
        );
}

body::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
        radial-gradient(circle at 20% 30%, rgba(255,215,0,0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 70%, rgba(255,140,0,0.08) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(255,165,0,0.05) 0%, transparent 70%);
    pointer-events: none;
}

.restaurant-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 0;
}

.menu-board {
    position: absolute;
    top: 20px;
    right: 30px;
    width: 220px;
    height: 280px;
    background: linear-gradient(135deg, #1a0f0a 0%, #2c1810 100%);
    border: 10px solid #CD853F;
    border-radius: 15px;
    box-shadow:
        0 15px 40px rgba(0,0,0,0.6),
        inset 0 2px 10px rgba(255,255,255,0.05);
}

.menu-board::before {
    content: 'MENU';
    position: absolute;
    top: 15px;
    left: 50%;
    transform: translateX(-50%);
    color: #FFD700;
    font-size: 2em;
    font-weight: 900;
    text-shadow:
        2px 2px 0 #FF8C00,
        4px 4px 10px rgba(255,215,0,0.5);
    letter-spacing: 4px;
}

.menu-board::after {
    content: 'ÏπòÏ¶àÎ≤ÑÍ±∞\AÎ≤†Ïù¥Ïª® Î≤ÑÍ±∞\AÏÉêÎü¨Îìú';
    white-space: pre;
    position: absolute;
    top: 80px;
    left: 50%;
    transform: translateX(-50%);
    color: #FFA500;
    font-size: 1.1em;
    line-height: 2.3;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    font-weight: 700;
    text-align: center;
    width: 180px;
}

.shelf {
    position: absolute;
    bottom: 300px;
    left: 30px;
    width: 180px;
    height: 20px;
    background: linear-gradient(180deg, #A0522D 0%, #8B4513 100%);
    border-radius: 5px;
    box-shadow:
        0 8px 25px rgba(0,0,0,0.6),
        inset 0 2px 5px rgba(0,0,0,0.3);
    border: 3px solid #654321;
}

.shelf::before {
    content: '';
    display: none;
}

.shelf::after {
    content: '';
    position: absolute;
    top: -60px;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, transparent, #654321 20%, #654321 80%, transparent);
}

.lamp {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 120px;
    height: 70px;
    background: linear-gradient(180deg, #2c2c2c 0%, #3a3a3a 50%, #4a4a4a 100%);
    clip-path: polygon(25% 0%, 75% 0%, 100% 100%, 0% 100%);
    box-shadow:
        0 8px 40px rgba(255,215,0,0.4),
        inset 0 2px 5px rgba(255,255,255,0.1);
    border-radius: 5px;
}

.lamp::before {
    content: '';
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 15px;
    height: 15px;
    background: #2c2c2c;
    border-radius: 50%;
    box-shadow: 0 2px 5px rgba(0,0,0,0.5);
}

.lamp::after {
    content: '';
    position: absolute;
    bottom: -30px;
    left: 50%;
    transform: translateX(-50%);
    width: 300px;
    height: 300px;
    background: radial-gradient(
        ellipse at center,
        rgba(255,235,150,0.3) 0%,
        rgba(255,215,0,0.15) 30%,
        transparent 70%
    );
    animation: lampGlow 3s ease-in-out infinite;
}

@keyframes lampGlow {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.7;
    }
}

.shop-sign {
    position: absolute;
    top: 60px;
    left: 30px;
    background:
        linear-gradient(135deg, #FF6347 0%, #FF8C00 50%, #FFA500 100%);
    padding: 18px 35px;
    border-radius: 20px;
    border: 6px solid #FFD700;
    box-shadow:
        0 10px 30px rgba(0,0,0,0.6),
        inset 0 3px 15px rgba(255,255,255,0.4),
        0 0 30px rgba(255,215,0,0.5);
    animation: signGlow 2s ease-in-out infinite;
}

@keyframes signGlow {
    0%, 100% {
        box-shadow:
            0 10px 30px rgba(0,0,0,0.6),
            inset 0 3px 15px rgba(255,255,255,0.4),
            0 0 30px rgba(255,215,0,0.5);
    }
    50% {
        box-shadow:
            0 10px 30px rgba(0,0,0,0.6),
            inset 0 3px 15px rgba(255,255,255,0.4),
            0 0 50px rgba(255,215,0,0.8);
    }
}

.shop-sign::before {
    content: 'üçî BURGER SHOP üçî';
    color: white;
    font-size: 1.3em;
    font-weight: 900;
    text-shadow:
        3px 3px 0 #8B4513,
        -1px -1px 0 #8B4513,
        1px -1px 0 #8B4513,
        -1px 1px 0 #8B4513,
        5px 5px 15px rgba(0,0,0,0.7);
    letter-spacing: 2px;
}

.shop-sign::after {
    content: '‚≠ê';
    position: absolute;
    top: -8px;
    right: -8px;
    font-size: 1.5em;
    color: #FFD700;
    text-shadow: 0 0 15px rgba(255,215,0,1);
    animation: starTwinkle 1.5s infinite;
}

@keyframes starTwinkle {
    0%, 100% {
        opacity: 1;
        transform: rotate(0deg) scale(1);
    }
    50% {
        opacity: 0.5;
        transform: rotate(180deg) scale(1.2);
    }
}

.clock {
    position: absolute;
    top: 100px;
    right: 280px;
    width: 90px;
    height: 90px;
    background: linear-gradient(135deg, #F5F5DC 0%, #E8E8D0 100%);
    border-radius: 50%;
    border: 6px solid #8B4513;
    box-shadow:
        0 8px 25px rgba(0,0,0,0.5),
        inset 0 2px 10px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
}

.clock::before {
    content: '12';
    position: absolute;
    top: 8px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.9em;
    font-weight: bold;
    color: #2c1810;
}

.clock::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 2px;
    height: 20px;
    background: #2c1810;
    transform-origin: bottom center;
    transform: translate(-1px, -20px) rotate(90deg);
    border-radius: 2px;
    box-shadow: 0 0 2px rgba(0,0,0,0.5);
}

.plant {
    position: absolute;
    bottom: 320px;
    right: 40px;
    width: 60px;
    height: 80px;
}

.plant::before {
    content: 'üåø';
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 2.5em;
    filter: drop-shadow(0 5px 10px rgba(0,0,0,0.4));
}

.plant::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 50px;
    height: 25px;
    background: linear-gradient(180deg, #CD853F 0%, #8B4513 100%);
    border-radius: 0 0 10px 10px;
    border: 3px solid #654321;
    box-shadow: 0 3px 10px rgba(0,0,0,0.4);
    clip-path: polygon(20% 0%, 80% 0%, 100% 100%, 0% 100%);
}

.game-container {
    width: 100%;
    height: 100vh;
    position: relative;
}

.screen {
    width: 100%;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: 0;
    left: 0;
}

.screen.hidden {
    display: none;
}

.start-content {
    text-align: center;
    background:
        repeating-linear-gradient(
            45deg,
            transparent,
            transparent 35px,
            rgba(255,140,0,0.03) 35px,
            rgba(255,140,0,0.03) 70px
        ),
        linear-gradient(135deg, #FFF8DC 0%, #FFE4B5 100%);
    padding: 30px 60px;
    border-radius: 30px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    border: 8px solid #D2691E;
    position: relative;
}

.start-content::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 0;
}

.start-content > * {
    position: relative;
    z-index: 1;
}

.start-content::before {
    content: 'üçî';
    position: absolute;
    top: -50px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 5em;
    filter: drop-shadow(0 10px 20px rgba(0,0,0,0.3));
}

.game-logo {
    font-size: 3em;
    margin-bottom: 15px;
    color: #FF6347;
    text-shadow: 3px 3px 0px #FFA500;
    font-weight: 900;
}

.game-desc {
    font-size: 1.3em;
    color: #666;
    margin-bottom: 25px;
}

.controls-info {
    display: flex;
    gap: 30px;
    justify-content: center;
    margin-bottom: 40px;
    flex-wrap: wrap;
}

.control-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

.key {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 15px 25px;
    border-radius: 10px;
    font-weight: 900;
    font-size: 1.2em;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.desc {
    font-size: 0.9em;
    color: #666;
    font-weight: 600;
}

.nickname-input-container {
    margin: 20px 0;
}

.nickname-input {
    padding: 15px 25px;
    font-size: 1.2em;
    border: 3px solid #FF8C00;
    border-radius: 15px;
    background: white;
    color: #333;
    text-align: center;
    width: 280px;
    max-width: 100%;
    font-weight: 600;
    transition: all 0.3s ease;
}

.nickname-input:focus {
    outline: none;
    border-color: #FF6347;
    box-shadow: 0 0 20px rgba(255,99,71,0.3);
}

.nickname-input::placeholder {
    color: #999;
}

.start-btn {
    padding: 20px 60px;
    font-size: 1.5em;
    font-weight: 900;
    background: linear-gradient(135deg, #FF6347 0%, #FFA500 100%);
    color: white;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 10px 30px rgba(255,99,71,0.4);
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    margin-bottom: 15px;
}

.start-btn:active {
    transform: scale(0.95);
}

.hall-of-fame-btn {
    padding: 15px 40px;
    font-size: 1.2em;
    font-weight: 700;
    background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
    color: #333;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 8px 25px rgba(255,215,0,0.4);
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
}

.hall-of-fame-btn:active {
    transform: scale(0.95);
}

.hall-of-fame-content {
    background:
        repeating-linear-gradient(
            45deg,
            transparent,
            transparent 35px,
            rgba(255,140,0,0.03) 35px,
            rgba(255,140,0,0.03) 70px
        ),
        linear-gradient(135deg, #FFF8DC 0%, #FFE4B5 100%);
    padding: 30px;
    border-radius: 30px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    border: 8px solid #D2691E;
    max-width: 600px;
    width: 90%;
    max-height: 80vh;
    overflow-y: auto;
}

.hall-of-fame-title {
    font-size: 2.5em;
    margin-bottom: 30px;
    color: #FF6347;
    text-shadow: 3px 3px 0px #FFA500;
    font-weight: 900;
}

.hall-of-fame-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-bottom: 30px;
}

.hall-of-fame-item {
    background: linear-gradient(135deg, #FFFFFF 0%, #FFF8DC 100%);
    padding: 20px;
    border-radius: 15px;
    border: 3px solid #D2691E;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    display: flex;
    align-items: center;
    gap: 20px;
}

.hall-of-fame-rank {
    font-size: 2em;
    font-weight: 900;
    color: #FF6347;
    min-width: 50px;
    text-align: center;
}

.hall-of-fame-rank.first {
    color: #FFD700;
    text-shadow: 2px 2px 0px #FFA500;
}

.hall-of-fame-rank.second {
    color: #C0C0C0;
}

.hall-of-fame-rank.third {
    color: #CD7F32;
}

.hall-of-fame-info {
    flex: 1;
}

.hall-of-fame-name {
    font-size: 1.5em;
    font-weight: 700;
    color: #333;
    margin-bottom: 5px;
}

.hall-of-fame-stats {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    font-size: 0.9em;
    color: #666;
}

.hall-of-fame-stat {
    display: flex;
    align-items: center;
    gap: 5px;
}

.back-btn {
    padding: 15px 40px;
    font-size: 1.2em;
    font-weight: 700;
    background: linear-gradient(135deg, #8B4513 0%, #D2691E 100%);
    color: white;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 8px 25px rgba(139,69,19,0.4);
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
}

.back-btn:active {
    transform: scale(0.95);
}

.empty-hall-of-fame {
    text-align: center;
    padding: 40px;
    color: #999;
    font-size: 1.2em;
}

#gameScreen {
    display: flex;
    flex-direction: column;
    padding: 20px;
    gap: 15px;
    position: relative;
    z-index: 1;
}

#gameScreen.hidden {
    display: none;
}

#gameScreen > *:not(.restaurant-bg) {
    position: relative;
    z-index: 2;
}

.top-ui {
    display: flex;
    justify-content: center;
    gap: 20px;
}

.score-display,
.level-display,
.combo-display {
    background: linear-gradient(135deg, #FFF8DC 0%, #FFE4B5 100%);
    padding: 10px 25px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    display: flex;
    gap: 10px;
    align-items: center;
    border: 3px solid #D2691E;
}

.combo-display {
    background: linear-gradient(135deg, #ff6b6b 0%, #ff5252 100%);
    border-color: #8B0000;
}

.combo-display .label,
.combo-display .value {
    color: white;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

.label {
    font-weight: 700;
    font-size: 1em;
}

.value {
    font-weight: 900;
    font-size: 1.5em;
    color: #FF6347;
}

.customer-area {
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    min-height: 280px;
    position: relative;
    padding-top: 20px;
    gap: 15px;
}

.customer-area::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 100px;
    background: linear-gradient(180deg, transparent 0%, rgba(139,69,19,0.3) 100%);
    pointer-events: none;
}

.customer {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    animation: customerEnter 0.5s ease;
    position: relative;
    transform: scale(0.7);
}

@keyframes customerEnter {
    from {
        transform: translateX(-200px) scale(0.7);
        opacity: 0;
    }
    to {
        transform: translateX(0) scale(0.7);
        opacity: 1;
    }
}

@keyframes customerLeave {
    0% {
        transform: translateX(0) rotate(0deg);
        opacity: 1;
    }
    50% {
        transform: translateX(-50px) rotate(-10deg);
    }
    100% {
        transform: translateX(-300px) rotate(-20deg);
        opacity: 0;
    }
}

@keyframes customerLeaveHappy {
    0% {
        transform: translateX(0);
        opacity: 1;
    }
    100% {
        transform: translateX(300px);
        opacity: 0;
    }
}

.praise-bubble {
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    padding: 15px 25px;
    border-radius: 20px;
    border: 4px solid #FF69B4;
    font-size: 1.5em;
    font-weight: 900;
    color: #FF1493;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    box-shadow:
        0 5px 20px rgba(255,105,180,0.5),
        inset 0 2px 10px rgba(255,255,255,0.8);
    animation: bubbleFloat 2s ease-out forwards;
    pointer-events: none;
    z-index: 101;
}

.praise-bubble::before {
    content: '';
    position: absolute;
    bottom: -15px;
    left: 30px;
    width: 0;
    height: 0;
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-top: 15px solid #FF69B4;
}

.praise-bubble::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 33px;
    width: 0;
    height: 0;
    border-left: 12px solid transparent;
    border-right: 12px solid transparent;
    border-top: 12px solid white;
}

@keyframes bubbleFloat {
    0% {
        transform: translateX(-50%) scale(0);
        opacity: 0;
    }
    20% {
        transform: translateX(-50%) scale(1.1);
        opacity: 1;
    }
    80% {
        transform: translateX(-50%) scale(1);
        opacity: 1;
    }
    100% {
        transform: translateX(-50%) translateY(-30px) scale(0.9);
        opacity: 0;
    }
}

.tip-animation {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 3em;
    font-weight: 900;
    color: #FFD700;
    text-shadow:
        2px 2px 0 #FF8C00,
        -2px -2px 0 #FF8C00,
        2px -2px 0 #FF8C00,
        -2px 2px 0 #FF8C00,
        4px 4px 10px rgba(0,0,0,0.5);
    animation: tipFloat 2s ease-out forwards;
    pointer-events: none;
    z-index: 100;
}

@keyframes tipFloat {
    0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
    }
    50% {
        transform: translate(-50%, -100px) scale(1.2);
        opacity: 1;
    }
    100% {
        transform: translate(-50%, -150px) scale(1);
        opacity: 0;
    }
}

.customer-face {
    position: relative;
    width: 120px;
    height: 160px;
    animation: bounce 2s ease-in-out infinite;
}

.customer-face {
    --skin-tone: #FFDAB9;
    filter: drop-shadow(0 8px 15px rgba(0,0,0,0.3));
}

.customer-face::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 80px;
    background: var(--skin-tone, #FFDAB9);
    border-radius: 50%;
    border: 3px solid #2c1810;
    box-shadow:
        inset -5px -5px 10px rgba(0,0,0,0.1),
        inset 5px 5px 10px rgba(255,255,255,0.5);
    z-index: 1;
}

.customer-eyes {
    position: absolute;
    top: 30px;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    z-index: 10;
}

.eye {
    width: 12px;
    height: 12px;
    background: #2c1810;
    border-radius: 50%;
    box-shadow:
        0 1px 2px rgba(255,255,255,0.5),
        inset 0 1px 2px rgba(0,0,0,0.3);
}

.left-eye {
    margin-left: 5px;
}

.right-eye {
    margin-right: 5px;
}

.customer-body {
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 80px;
    background: linear-gradient(180deg, #4169E1 0%, #1E90FF 100%);
    border-radius: 15px 15px 0 0;
    border: 3px solid #2c1810;
    box-shadow:
        0 -3px 10px rgba(0,0,0,0.2),
        inset 0 2px 5px rgba(255,255,255,0.3);
    z-index: 5;
}

.customer-arms {
    position: absolute;
    bottom: 40px;
    left: 50%;
    transform: translateX(-50%);
    width: 130px;
    height: 20px;
    display: flex;
    justify-content: space-between;
    z-index: 5;
}

.customer-arms::before,
.customer-arms::after {
    content: '';
    width: 40px;
    height: 22px;
    background: var(--skin-tone, #FFDAB9);
    border-radius: 15px;
    border: 3px solid #2c1810;
    box-shadow:
        0 3px 8px rgba(0,0,0,0.2),
        inset -2px -2px 4px rgba(0,0,0,0.1);
}

.customer-hair {
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 0;
    --hair-color: #4A2C2A;
}

.hair-short::before {
    content: '';
    position: absolute;
    width: 75px;
    height: 30px;
    background: linear-gradient(180deg, var(--hair-color) 0%, color-mix(in srgb, var(--hair-color) 80%, black) 100%);
    border-radius: 50% 50% 0 0;
    top: -5px;
    left: 50%;
    transform: translateX(-50%);
    border: 3px solid #2c1810;
    box-shadow: 0 3px 8px rgba(0,0,0,0.3);
}

.hair-ponytail::before {
    content: '';
    position: absolute;
    width: 75px;
    height: 35px;
    background: linear-gradient(135deg, var(--hair-color) 0%, color-mix(in srgb, var(--hair-color) 85%, black) 100%);
    border-radius: 50% 50% 20% 20%;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    border: 3px solid #2c1810;
    box-shadow: 0 3px 8px rgba(0,0,0,0.3);
}

.hair-ponytail::after {
    content: '';
    position: absolute;
    width: 25px;
    height: 60px;
    background: linear-gradient(180deg, var(--hair-color) 0%, color-mix(in srgb, var(--hair-color) 70%, black) 100%);
    border-radius: 50%;
    top: 25px;
    right: -30px;
    border: 3px solid #2c1810;
    box-shadow: 0 3px 8px rgba(0,0,0,0.3);
}

.hair-sporty::before {
    content: '';
    position: absolute;
    width: 78px;
    height: 25px;
    background: linear-gradient(180deg, var(--hair-color) 0%, color-mix(in srgb, var(--hair-color) 80%, black) 100%);
    border-radius: 50% 50% 0 0;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    border: 3px solid #2c1810;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}

.hair-messy::before {
    content: '‚âà‚âà‚âà‚âà';
    position: absolute;
    font-size: 1.8em;
    color: var(--hair-color);
    top: -18px;
    left: 50%;
    transform: translateX(-50%);
    text-shadow:
        2px 2px 0 #2c1810,
        -1px -1px 0 #2c1810,
        1px -1px 0 #2c1810,
        -1px 1px 0 #2c1810;
    letter-spacing: -8px;
}

.hair-bun::before {
    content: '';
    position: absolute;
    width: 45px;
    height: 45px;
    background: radial-gradient(circle, var(--hair-color) 0%, color-mix(in srgb, var(--hair-color) 70%, black) 100%);
    border-radius: 50%;
    top: -30px;
    left: 50%;
    transform: translateX(-50%);
    border: 3px solid #2c1810;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}

.hair-undercut::before {
    content: '';
    position: absolute;
    width: 80px;
    height: 35px;
    background: linear-gradient(180deg, var(--hair-color) 0%, color-mix(in srgb, var(--hair-color) 80%, black) 100%);
    border-radius: 50% 50% 0 0;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    border: 3px solid #2c1810;
    box-shadow: 0 3px 8px rgba(0,0,0,0.3);
    clip-path: polygon(30% 70%, 70% 70%, 100% 100%, 0% 100%);
}

.hair-bob::before {
    content: '';
    position: absolute;
    width: 85px;
    height: 45px;
    background: linear-gradient(135deg, var(--hair-color) 0%, color-mix(in srgb, var(--hair-color) 85%, black) 100%);
    border-radius: 50% 50% 40% 40%;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    border: 3px solid #2c1810;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    clip-path: polygon(0 0, 100% 0, 100% 60%, 0 60%);
}

.hair-slick::before {
    content: '';
    position: absolute;
    width: 75px;
    height: 28px;
    background: linear-gradient(180deg, var(--hair-color) 0%, color-mix(in srgb, var(--hair-color) 90%, black) 100%);
    border-radius: 50% 50% 0 0;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    border: 3px solid #2c1810;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    background-image: linear-gradient(90deg, transparent 45%, rgba(255,255,255,0.3) 50%, transparent 55%);
}

.hair-curly::before {
    content: '‚ó†‚ó†‚ó†‚ó†';
    position: absolute;
    font-size: 1.6em;
    color: var(--hair-color);
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    text-shadow:
        2px 2px 0 #2c1810,
        -1px -1px 0 #2c1810,
        1px -1px 0 #2c1810,
        -1px 1px 0 #2c1810,
        0 3px 5px rgba(0,0,0,0.3);
    letter-spacing: -6px;
}

.customer-accessory {
    position: absolute;
    top: 25px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 15;
}

.accessory-glasses::before {
    content: '';
    position: absolute;
    width: 60px;
    height: 25px;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    background:
        radial-gradient(circle at 15px 12px, transparent 10px, #2c1810 10px, #2c1810 12px, transparent 12px),
        radial-gradient(circle at 45px 12px, transparent 10px, #2c1810 10px, #2c1810 12px, transparent 12px);
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
}

.accessory-glasses::after {
    content: '';
    position: absolute;
    width: 58px;
    height: 3px;
    background: #2c1810;
    top: 12px;
    left: 50%;
    transform: translateX(-50%);
}

.accessory-hat::before {
    content: '';
    position: absolute;
    width: 95px;
    height: 40px;
    background: linear-gradient(180deg, #FFFFFF 0%, #F0F0F0 100%);
    border-radius: 50% 50% 0 0;
    top: -55px;
    left: 50%;
    transform: translateX(-50%);
    border: 3px solid #2c1810;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

.accessory-hat::after {
    content: '';
    position: absolute;
    width: 105px;
    height: 18px;
    background: linear-gradient(135deg, #FFFFFF 0%, #E8E8E8 100%);
    border-radius: 50%;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    border: 3px solid #2c1810;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.accessory-beret::before {
    content: '';
    position: absolute;
    width: 75px;
    height: 35px;
    background: radial-gradient(ellipse, #9B59B6 0%, #8E44AD 100%);
    border-radius: 50%;
    top: -48px;
    left: 55%;
    transform: translateX(-50%) rotate(-15deg);
    border: 3px solid #2c1810;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}

.accessory-beret::after {
    content: '';
    position: absolute;
    width: 12px;
    height: 12px;
    background: #7D3C98;
    border-radius: 50%;
    top: -44px;
    left: 55%;
    transform: translateX(-50%);
    border: 2px solid #2c1810;
}

.accessory-tie::before {
    content: '';
    position: absolute;
    width: 22px;
    height: 45px;
    background: linear-gradient(135deg, #E74C3C 0%, #C0392B 100%);
    top: 60px;
    left: 50%;
    transform: translateX(-50%);
    clip-path: polygon(50% 0%, 0% 20%, 40% 20%, 20% 100%, 80% 100%, 60% 20%, 100% 20%);
    border: 2px solid #2c1810;
    box-shadow: 0 3px 8px rgba(0,0,0,0.3);
}

.accessory-ribbon::before {
    content: 'üéÄ';
    position: absolute;
    font-size: 2em;
    top: 0px;
    right: -50px;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
}

.accessory-headband::before {
    content: '';
    position: absolute;
    width: 80px;
    height: 15px;
    background: linear-gradient(135deg, #F39C12 0%, #E67E22 100%);
    border-radius: 10px 10px 0 0;
    top: 5px;
    left: 50%;
    transform: translateX(-50%);
    border: 3px solid #2c1810;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}

.accessory-beard::before {
    content: '';
    position: absolute;
    width: 50px;
    height: 25px;
    background: linear-gradient(180deg, #654321 0%, #4A3020 100%);
    border-radius: 0 0 50% 50%;
    top: 40px;
    left: 50%;
    transform: translateX(-50%);
    border: 3px solid #2c1810;
    border-top: none;
    box-shadow: 0 3px 8px rgba(0,0,0,0.3);
}

.accessory-bow::before {
    content: 'üéÄ';
    position: absolute;
    font-size: 1.3em;
    color: #E91E63;
    top: 0px;
    right: -45px;
    transform: rotate(0deg);
    filter: drop-shadow(2px 2px 0 #2c1810) drop-shadow(-1px -1px 0 #2c1810);
}

.accessory-cap::before {
    content: '';
    position: absolute;
    width: 70px;
    height: 30px;
    background: linear-gradient(135deg, #3498DB 0%, #2980B9 100%);
    border-radius: 50% 50% 0 0;
    top: -35px;
    left: 50%;
    transform: translateX(-50%);
    border: 3px solid #2c1810;
    box-shadow: 0 3px 10px rgba(0,0,0,0.3);
}

.accessory-cap::after {
    content: '';
    position: absolute;
    width: 50px;
    height: 8px;
    background: linear-gradient(135deg, #2980B9 0%, #21618C 100%);
    border-radius: 5px;
    top: -10px;
    left: 20%;
    transform: translateX(-50%);
    border: 2px solid #2c1810;
}

.accessory-none {
    display: none;
}

.customer-mouth {
    position: absolute;
    top: 50px;
    left: 50%;
    transform: translateX(-50%);
    width: 35px;
    height: 16px;
    border: 3px solid #2c1810;
    border-top: none;
    border-radius: 0 0 18px 18px;
    z-index: 10;
}

.customer-face.happy::before {
    box-shadow:
        inset -5px -5px 10px rgba(0,0,0,0.1),
        inset 5px 5px 10px rgba(255,255,255,0.5),
        -15px 10px 0 5px rgba(255,182,193,0.4),
        15px 10px 0 5px rgba(255,182,193,0.4);
}

.customer-face.happy .customer-mouth {
    border-radius: 0 0 25px 25px;
    height: 20px;
    border-color: #2c1810;
    box-shadow: inset 0 -3px 5px rgba(255,192,203,0.3);
}

.customer-face.neutral .customer-mouth {
    border-radius: 5px;
    height: 4px;
    background: #2c1810;
    border: none;
    width: 30px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}

.customer-face.angry .customer-mouth {
    border-radius: 25px 25px 0 0;
    border-bottom: none;
    border-top: 4px solid #2c1810;
    top: 55px;
    border-color: #2c1810;
}

.customer-face.happy .eye {
    animation: eyeSparkle 1.5s ease-in-out infinite;
}

@keyframes eyeSparkle {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.1);
    }
}

.customer-face.neutral .eye {
    width: 10px;
    height: 10px;
}

.customer-face.angry .eye {
    width: 16px;
    height: 4px;
    border-radius: 2px;
    background: #8B0000;
}

.customer-face.angry .left-eye {
    transform: rotate(-15deg);
}

.customer-face.angry .right-eye {
    transform: rotate(15deg);
}

@keyframes bounce {
    0%, 100% {
        transform: translateY(0);
    }
    50% {
        transform: translateY(-10px);
    }
}

.speech-bubble {
    background: linear-gradient(135deg, #FFFBF0 0%, #FFF8DC 100%);
    padding: 15px 20px;
    border-radius: 20px;
    box-shadow:
        0 10px 30px rgba(0,0,0,0.3),
        inset 0 2px 10px rgba(255,215,0,0.1);
    position: relative;
    min-width: 500px;
    max-width: 700px;
    border: 3px solid #FFD700;
}

.speech-bubble::before {
    content: '';
    position: absolute;
    bottom: -23px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-top: 20px solid #FFD700;
}

.speech-bubble::after {
    content: '';
    position: absolute;
    bottom: -18px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 17px solid transparent;
    border-right: 17px solid transparent;
    border-top: 17px solid #FFFBF0;
}

.order-text {
    font-weight: 800;
    color: #FF6347;
    margin-bottom: 12px;
    font-size: 1.2em;
    text-align: center;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

.order-burger {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 80px;
    background: linear-gradient(135deg, #FFFFFF 0%, #F8F8FF 100%);
    border-radius: 15px;
    padding: 15px 20px;
    box-shadow: inset 0 2px 8px rgba(0,0,0,0.08);
    border: 2px solid #E8E8E8;
}

.order-layer {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
}

.order-ingredient {
    font-size: 2.2em;
    margin: 0;
    filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.2));
}

.patience-bar {
    width: 200px;
    height: 15px;
    background: #ddd;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
}

.patience-fill {
    height: 100%;
    background: linear-gradient(90deg, #51cf66 0%, #37b24d 100%);
    transition: width 0.3s linear, background 0.3s ease;
    border-radius: 10px;
    width: 100%;
}

.patience-fill.warning {
    background: linear-gradient(90deg, #ffa500 0%, #ff8c00 100%);
}

.patience-fill.danger {
    background: linear-gradient(90deg, #ff6b6b 0%, #ff0000 100%);
    animation: shake 0.5s infinite;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-2px); }
    75% { transform: translateX(2px); }
}

.work-area {
    display: flex;
    justify-content: center;
    flex: 1;
    min-height: 180px;
}

.game-controls {
    display: flex;
    justify-content: center;
    gap: 15px;
    padding: 10px;
}

.game-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    background: linear-gradient(135deg, #FF8C00 0%, #FF6347 100%);
    border: none;
    border-radius: 12px;
    padding: 8px 18px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(255,99,71,0.4);
    font-weight: 700;
    color: white;
    font-size: 1em;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
}

.game-btn:active {
    transform: scale(0.95);
}

.game-btn .btn-icon {
    font-size: 1.3em;
}

.undo-btn {
    background: linear-gradient(135deg, #868e96 0%, #495057 100%);
    box-shadow: 0 4px 12px rgba(73,80,87,0.4);
}

.submit-btn {
    background: linear-gradient(135deg, #FF6347 0%, #DC143C 100%);
    box-shadow: 0 4px 12px rgba(220,20,60,0.4);
    animation: pulse 2s ease-in-out infinite;
}

.counter {
    background:
        linear-gradient(90deg, transparent 0%, rgba(139,69,19,0.3) 50%, transparent 100%),
        linear-gradient(180deg, #B8860B 0%, #A0522D 50%, #8B4513 100%);
    width: 600px;
    height: 250px;
    border-radius: 20px 20px 0 0;
    box-shadow:
        0 -5px 30px rgba(0,0,0,0.5),
        inset 0 5px 20px rgba(0,0,0,0.3),
        inset 0 -10px 30px rgba(0,0,0,0.4);
    display: flex;
    justify-content: center;
    align-items: flex-end;
    padding: 20px;
    position: relative;
    border: 5px solid #654321;
    border-bottom: none;
}

.counter::before {
    content: '';
    position: absolute;
    top: 15px;
    left: 15px;
    right: 15px;
    height: 12px;
    background: linear-gradient(90deg,
        #CD853F 0%,
        #D2691E 20%,
        #CD853F 40%,
        #D2691E 60%,
        #CD853F 80%,
        #D2691E 100%
    );
    border-radius: 8px;
    box-shadow:
        0 3px 8px rgba(0,0,0,0.4),
        inset 0 2px 4px rgba(255,255,255,0.2);
    border: 2px solid #8B4513;
}

.counter::after {
    content: '';
    position: absolute;
    top: 20px;
    left: 30px;
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, #E8E8E8 0%, #A9A9A9 100%);
    border-radius: 50%;
    box-shadow:
        60px 0 0 0 #C0C0C0,
        60px -5px 0 -2px #A9A9A9,
        120px 5px 0 0 linear-gradient(180deg, #FFD700 0%, #FFA500 100%),
        180px 0 0 0 #90EE90,
        0 3px 10px rgba(0,0,0,0.4);
    border: 3px solid #696969;
}

.work-area::before {
    content: '';
    position: absolute;
    bottom: 260px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 4px;
    background: repeating-linear-gradient(
        90deg,
        #C0C0C0 0px,
        #C0C0C0 10px,
        transparent 10px,
        transparent 20px
    );
    box-shadow: 0 1px 3px rgba(0,0,0,0.3);
}

.building-plate {
    background: radial-gradient(circle, #FFFFFF 0%, #F5F5F5 70%, #E8E8E8 100%);
    width: 100px;
    height: 100px;
    border-radius: 50%;
    box-shadow:
        0 8px 25px rgba(0,0,0,0.4),
        inset 0 2px 10px rgba(0,0,0,0.1);
    display: flex;
    justify-content: center;
    align-items: flex-end;
    padding-bottom: 10px;
    border: 3px solid #D3D3D3;
    position: relative;
}

.building-plate::before {
    content: '';
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 160px;
    height: 160px;
    border: 2px solid rgba(0,0,0,0.05);
    border-radius: 50%;
}

.burger-building {
    display: flex;
    flex-direction: column-reverse;
    align-items: center;
    gap: 0;
    position: relative;
    width: 100%;
    height: 100%;
}

.building-ingredient {
    font-size: 2.5em;
    margin: -10px 0;
    filter: drop-shadow(2px 2px 3px rgba(0,0,0,0.2));
    position: relative;
}

.building-ingredient.new-ingredient {
    animation: ingredientDrop 0.4s ease;
}

@keyframes ingredientDrop {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

@keyframes ingredientShuffle {
    0%, 100% {
        transform: translateY(0);
        opacity: 1;
    }
    25% {
        transform: translateY(-15px) rotate(-5deg);
        opacity: 0.7;
    }
    50% {
        transform: translateY(-20px) rotate(5deg);
        opacity: 0.5;
    }
    75% {
        transform: translateY(-10px) rotate(-3deg);
        opacity: 0.7;
    }
}

.ingredients-area {
    position: relative;
    display: flex;
    justify-content: center;
    padding: 15px 20px;
    margin-top: auto;
}

.ingredients-wrapper {
    display: flex;
    gap: 15px;
    align-items: center;
    justify-content: center;
}

.ingredients-container {
    display: flex;
    gap: 12px;
    background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,248,220,0.95) 100%);
    padding: 20px;
    border-radius: 20px;
    box-shadow:
        0 10px 30px rgba(0,0,0,0.3),
        inset 0 2px 10px rgba(139,69,19,0.1);
    border: 4px solid #D2691E;
    max-width: 98%;
    flex-wrap: wrap;
    justify-content: center;
    max-height: 300px;
}

.ingredient-slot {
    width: 80px;
    height: 80px;
    background: #f8f9fa;
    border: 3px solid #ddd;
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
}

@media (hover: hover) {
    .ingredient-slot:hover {
        transform: translateY(-5px);
        border-color: #FFA500;
    }

    .start-btn:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 15px 40px rgba(255,99,71,0.6);
    }

    .restart-btn:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 15px 40px rgba(81,207,102,0.6);
    }
}

.ingredient-slot:active {
    transform: scale(0.95);
}

.ingredient-slot.selected {
    background: linear-gradient(135deg, #FFE4B5 0%, #FFDAB9 100%);
    border-color: #FF6347;
    border-width: 4px;
    transform: translateY(-10px);
    box-shadow: 0 10px 20px rgba(255,99,71,0.3);
}

.ingredient-icon {
    font-size: 2em;
}

.ingredient-label {
    font-size: 0.6em;
    font-weight: 700;
    color: #666;
    margin-top: 3px;
}

.ingredient-slot.side-slot {
    background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
    border-color: #4CAF50;
}

.ingredient-slot.side-slot:hover {
    border-color: #2E7D32;
}

.ingredient-slot.side-slot.selected {
    background: linear-gradient(135deg, #A5D6A7 0%, #81C784 100%);
    border-color: #2E7D32;
}

.building-side {
    font-size: 2.5em !important;
}

.order-side {
    transform: scale(1.1);
}

.key-hints {
    display: flex;
    justify-content: center;
    gap: 20px;
}

.hint {
    background: rgba(0,0,0,0.6);
    color: white;
    padding: 8px 15px;
    border-radius: 10px;
    font-size: 0.9em;
    font-weight: 700;
}

.mobile-controls {
    display: none;
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    gap: 15px;
    z-index: 1000;
    background: rgba(0,0,0,0.7);
    padding: 15px 20px;
    border-radius: 25px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

.mobile-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #FF8C00 0%, #FF6347 100%);
    border: none;
    border-radius: 15px;
    padding: 15px 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(255,99,71,0.4);
    min-width: 80px;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
}

.mobile-btn:active {
    transform: scale(0.95);
    box-shadow: 0 2px 8px rgba(255,99,71,0.6);
}

.mobile-btn .btn-icon {
    font-size: 1.5em;
    margin-bottom: 5px;
}

.mobile-btn .btn-label {
    font-size: 0.8em;
    font-weight: 700;
    color: white;
}

.undo-mobile-btn {
    background: linear-gradient(135deg, #868e96 0%, #495057 100%);
    box-shadow: 0 5px 15px rgba(73,80,87,0.4);
}

.add-mobile-btn {
    background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%);
    box-shadow: 0 5px 15px rgba(55,178,77,0.4);
}

.submit-mobile-btn {
    background: linear-gradient(135deg, #FF6347 0%, #DC143C 100%);
    box-shadow: 0 5px 15px rgba(220,20,60,0.4);
    transform: scale(1.15);
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% {
        box-shadow: 0 5px 15px rgba(220,20,60,0.4);
    }
    50% {
        box-shadow: 0 5px 25px rgba(220,20,60,0.7);
    }
}

.submit-btn-fixed {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #FF6347 0%, #DC143C 100%);
    border: none;
    border-radius: 20px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 8px 20px rgba(220,20,60,0.5);
    min-width: 100px;
    min-height: 100px;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
    animation: pulse 2s ease-in-out infinite;
    flex-shrink: 0;
}

.submit-btn-fixed:active {
    transform: scale(0.95);
}

.submit-btn-fixed .btn-icon {
    font-size: 2.5em;
    margin-bottom: 5px;
}

.submit-btn-fixed .btn-label {
    font-size: 1em;
    font-weight: 700;
    color: white;
}

.clear-content {
    text-align: center;
    background: linear-gradient(135deg, #FFE4B5 0%, #FFD700 50%, #FFA500 100%);
    padding: 60px;
    border-radius: 30px;
    box-shadow:
        0 20px 60px rgba(0,0,0,0.5),
        0 0 50px rgba(255,215,0,0.6);
    border: 8px solid #FFD700;
    position: relative;
    animation: clearPulse 2s ease-in-out infinite;
}

@keyframes clearPulse {
    0%, 100% {
        box-shadow:
            0 20px 60px rgba(0,0,0,0.5),
            0 0 50px rgba(255,215,0,0.6);
    }
    50% {
        box-shadow:
            0 20px 60px rgba(0,0,0,0.5),
            0 0 80px rgba(255,215,0,1);
    }
}

.clear-content::before {
    content: 'üëë';
    position: absolute;
    top: -50px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 5em;
    animation: crownBounce 1s ease-in-out infinite;
}

@keyframes crownBounce {
    0%, 100% {
        transform: translateX(-50%) translateY(0) rotate(0deg);
    }
    50% {
        transform: translateX(-50%) translateY(-10px) rotate(10deg);
    }
}

.clear-title {
    font-size: 4em;
    font-weight: 900;
    background: linear-gradient(135deg, #FF6347 0%, #FFD700 50%, #FF6347 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 20px;
    text-shadow: 2px 2px 10px rgba(255,215,0,0.5);
    animation: titleShine 2s linear infinite;
}

@keyframes titleShine {
    0% {
        background-position: 0% 50%;
    }
    100% {
        background-position: 200% 50%;
    }
}

.clear-message {
    font-size: 1.5em;
    font-weight: 700;
    color: #8B4513;
    margin-bottom: 30px;
    text-shadow: 1px 1px 2px rgba(255,255,255,0.8);
}

.gameover-content {
    text-align: center;
    background: linear-gradient(135deg, #FFE4E1 0%, #FFC0CB 100%);
    padding: 60px;
    border-radius: 30px;
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    border: 8px solid #D2691E;
    position: relative;
}

.gameover-content::before {
    content: 'üò¢';
    position: absolute;
    top: -40px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 4em;
}

.gameover-title {
    font-size: 4em;
    color: #ff6b6b;
    margin-bottom: 40px;
    font-weight: 900;
    text-shadow: 3px 3px 0px #ff5252;
}

.final-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 30px;
    margin-bottom: 40px;
}

.stat {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 15px;
}

.stat-label {
    font-size: 1em;
    color: #666;
    font-weight: 600;
    margin-bottom: 10px;
}

.stat-value {
    font-size: 2.5em;
    font-weight: 900;
    color: #FF6347;
}

.restart-btn {
    padding: 20px 60px;
    font-size: 1.5em;
    font-weight: 900;
    background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%);
    color: white;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 10px 30px rgba(81,207,102,0.4);
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
}

.restart-btn:active {
    transform: scale(0.95);
}

@keyframes perfectFeedback {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.2);
    }
    100% {
        transform: scale(1);
    }
}

.customer-face.perfect {
    animation: perfectFeedback 0.5s ease;
}

@media (max-width: 768px) {
    body {
        overflow-y: auto;
        height: auto;
        min-height: 100vh;
    }

    .game-container {
        overflow-y: auto;
        height: auto;
        min-height: 100vh;
        padding-bottom: 120px;
    }

    .game-logo {
        font-size: 2.5em;
    }

    .menu-board {
        width: 120px;
        height: 180px;
        top: 10px;
        right: 10px;
    }

    .menu-board::before {
        font-size: 1em;
        top: 10px;
    }

    .menu-board::after {
        font-size: 0.7em;
        top: 45px;
        line-height: 2;
    }

    .clock {
        width: 60px;
        height: 60px;
        top: 60px;
        right: 150px;
    }

    .clock::before {
        font-size: 0.7em;
    }

    .clock::after {
        height: 15px;
    }

    .plant,
    .shelf {
        display: none;
    }

    .customer-area {
        margin-bottom: 20px;
    }

    .customer {
        transform: scale(0.7);
    }

    .speech-bubble {
        min-width: 250px;
        padding: 12px 15px;
    }

    .order-ingredient {
        font-size: 1.8em;
    }

    .counter {
        width: 90%;
        height: 200px;
    }

    .building-plate {
        width: 100px;
        height: 100px;
    }

    .building-ingredient {
        font-size: 1.8em;
    }

    .ingredients-container {
        gap: 8px;
        padding: 12px 15px;
        overflow-x: auto;
        scrollbar-width: thin;
    }

    .ingredients-container::-webkit-scrollbar {
        height: 6px;
    }

    .ingredients-container::-webkit-scrollbar-thumb {
        background: rgba(0,0,0,0.3);
        border-radius: 3px;
    }

    .ingredient-slot {
        width: 55px;
        height: 55px;
        flex-shrink: 0;
    }

    .ingredient-icon {
        font-size: 1.8em;
    }

    .ingredient-label {
        font-size: 0.55em;
    }

    .key-hints {
        display: none;
    }

    .mobile-controls {
        display: flex;
    }

    .top-ui {
        gap: 10px;
        margin-bottom: 15px;
    }

    .score-display,
    .level-display,
    .combo-display {
        padding: 8px 15px;
    }

    .label {
        font-size: 0.8em;
    }

    .value {
        font-size: 1.2em;
    }

    .final-stats {
        grid-template-columns: 1fr;
        gap: 20px;
    }

    .stat-value {
        font-size: 2em;
    }

    .restart-btn {
        padding: 15px 40px;
        font-size: 1.2em;
    }

    .start-content {
        padding: 20px;
    }

    .controls-info {
        display: none;
    }

    .nickname-input {
        width: 90%;
        font-size: 1em;
        padding: 12px 20px;
    }

    .start-btn {
        padding: 15px 40px;
        font-size: 1.2em;
    }

    .hall-of-fame-btn {
        padding: 12px 30px;
        font-size: 1em;
    }

    .hall-of-fame-content {
        padding: 20px;
        width: 95%;
    }

    .hall-of-fame-title {
        font-size: 2em;
    }

    .hall-of-fame-item {
        padding: 15px;
        gap: 15px;
    }

    .hall-of-fame-rank {
        font-size: 1.5em;
        min-width: 40px;
    }

    .hall-of-fame-name {
        font-size: 1.2em;
    }

    .hall-of-fame-stats {
        font-size: 0.8em;
        gap: 10px;
    }

    .back-btn {
        padding: 12px 30px;
        font-size: 1em;
    }
}

@media (max-width: 480px) {
    .game-logo {
        font-size: 1.8em;
    }

    .menu-board,
    .clock {
        display: none;
    }

    .speech-bubble {
        min-width: 200px;
        padding: 10px;
    }

    .order-text {
        font-size: 1em;
    }

    .order-ingredient {
        font-size: 1.5em;
    }

    .counter {
        height: 180px;
    }

    .building-plate {
        width: 90px;
        height: 90px;
    }

    .building-ingredient {
        font-size: 1.5em;
    }

    .ingredient-slot {
        width: 50px;
        height: 50px;
    }

    .ingredient-icon {
        font-size: 1.6em;
    }

    .ingredient-label {
        font-size: 0.5em;
    }

    .mobile-controls {
        gap: 10px;
        padding: 12px 15px;
        bottom: 10px;
    }

    .mobile-btn {
        padding: 12px 15px;
        min-width: 70px;
    }

    .mobile-btn .btn-icon {
        font-size: 1.3em;
    }

    .mobile-btn .btn-label {
        font-size: 0.75em;
    }

    .top-ui {
        flex-wrap: wrap;
        gap: 8px;
    }

    .score-display,
    .level-display,
    .combo-display {
        padding: 6px 12px;
        flex: 1;
        min-width: 80px;
    }

    .label {
        font-size: 0.7em;
    }

    .value {
        font-size: 1em;
    }

    .clear-title,
    .gameover-title {
        font-size: 2em;
    }

    .stat-value {
        font-size: 1.5em;
    }

    .restart-btn {
        padding: 12px 30px;
        font-size: 1em;
    }

    .nickname-input {
        font-size: 0.9em;
        padding: 10px 15px;
    }

    .start-btn {
        padding: 12px 30px;
        font-size: 1em;
    }

    .hall-of-fame-btn {
        padding: 10px 25px;
        font-size: 0.9em;
    }

    .hall-of-fame-content {
        padding: 15px;
    }

    .hall-of-fame-title {
        font-size: 1.5em;
        margin-bottom: 20px;
    }

    .hall-of-fame-item {
        padding: 12px;
        gap: 10px;
        flex-direction: column;
        align-items: flex-start;
    }

    .hall-of-fame-rank {
        font-size: 1.8em;
        min-width: auto;
    }

    .hall-of-fame-name {
        font-size: 1.1em;
    }

    .hall-of-fame-stats {
        font-size: 0.75em;
        gap: 8px;
    }

    .back-btn {
        padding: 10px 25px;
        font-size: 0.9em;
    }

    .empty-hall-of-fame {
        font-size: 1em;
        padding: 30px;
    }
}

@media (max-height: 600px) and (orientation: landscape) {
    .game-container {
        padding-bottom: 80px;
    }

    .customer {
        transform: scale(0.5);
        margin-bottom: -20px;
    }

    .counter {
        height: 150px;
    }

    .building-plate {
        width: 80px;
        height: 80px;
    }

    .mobile-controls {
        padding: 8px 12px;
        gap: 8px;
    }

    .mobile-btn {
        padding: 10px 12px;
        min-width: 60px;
    }
}
    </style>
</head>
<body>
    <div class="game-container">
        <div id="startScreen" class="screen">
            <div class="start-content">
                <h1 class="game-logo">üçî BURGER SHOP</h1>
                <p class="game-desc">ÏÜêÎãòÏùò Ï£ºÎ¨∏ÏùÑ Î∞õÍ≥† ÌñÑÎ≤ÑÍ±∞Î•º ÎßåÎìúÏÑ∏Ïöî!</p>
                <div class="nickname-input-container">
                    <input type="text" id="nicknameInput" class="nickname-input" placeholder="ÏïåÎ∞îÏÉù ÎãâÎÑ§ÏûÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!" maxlength="10">
                </div>
                <button class="start-btn" onclick="startGame()">START GAME</button>
                <button class="hall-of-fame-btn" onclick="showHallOfFame()">üèÜ Î™ÖÏòàÏùò Ï†ÑÎãπ</button>
            </div>
        </div>

        <div id="gameScreen" class="screen hidden">
            <div class="restaurant-bg">
                <div class="lamp"></div>
                <div class="shop-sign"></div>
                <div class="menu-board"></div>
                <div class="shelf"></div>
                <div class="clock"></div>
                <div class="plant"></div>
            </div>

            <div class="top-ui">
                <div class="score-display">
                    <span class="label">üí∞ ÏàòÏùµ</span>
                    <span class="value" id="scoreValue">0Ïõê</span>
                </div>
                <div class="level-display">
                    <span class="label">üìä Î†àÎ≤®</span>
                    <span class="value" id="levelValue">1</span>
                </div>
                <div class="combo-display">
                    <span class="label">üî• ÏΩ§Î≥¥</span>
                    <span class="value" id="comboValue">0</span>
                </div>
            </div>

            <div class="customer-area">
                <div class="speech-bubble">
                    <div class="order-text">Ï£ºÎ¨∏Ìï¥Ï£ºÏÑ∏Ïöî!</div>
                    <div class="order-burger" id="orderBurger"></div>
                </div>
                <div class="customer" id="customer">
                    <div class="customer-face happy" id="customerFace">
                        <div class="customer-hair hair-short"></div>
                        <div class="customer-accessory accessory-none"></div>
                        <div class="customer-eyes">
                            <div class="eye left-eye"></div>
                            <div class="eye right-eye"></div>
                        </div>
                        <div class="customer-mouth"></div>
                        <div class="customer-arms"></div>
                        <div class="customer-body"></div>
                    </div>
                    <div class="patience-bar">
                        <div class="patience-fill" id="patienceFill"></div>
                    </div>
                </div>
            </div>

            <div class="game-controls">
                <button class="game-btn undo-btn" onclick="undoIngredient()">
                    <span class="btn-icon">‚Ü©Ô∏è</span>
                    <span class="btn-label">ÏÇ≠Ï†ú</span>
                </button>
                <button class="game-btn submit-btn" onclick="submitBurger()">
                    <span class="btn-icon">üì¶</span>
                    <span class="btn-label">Ìè¨Ïû•</span>
                </button>
            </div>

            <div class="work-area">
                <div class="counter">
                    <div class="building-plate">
                        <div class="burger-building" id="burgerBuilding"></div>
                    </div>
                </div>
            </div>

            <div class="ingredients-area">
                <div class="ingredients-container" id="ingredientsContainer">
                </div>
                <div class="selection-indicator" id="selectionIndicator"></div>
            </div>

            <div class="key-hints">
                <span class="hint">‚Üê ‚Üí Ïù¥Îèô</span>
                <span class="hint">SPACE Ï∂îÍ∞Ä</span>
                <span class="hint">BACKSPACE ÏÇ≠Ï†ú</span>
                <span class="hint">ENTER Ìè¨Ïû•</span>
            </div>

            <div class="mobile-controls">
                <button class="mobile-btn undo-mobile-btn" onclick="undoIngredient()">
                    <span class="btn-icon">‚Ü©Ô∏è</span>
                    <span class="btn-label">ÏÇ≠Ï†ú</span>
                </button>
                <button class="mobile-btn add-mobile-btn" onclick="addSelectedIngredient()">
                    <span class="btn-icon">‚ûï</span>
                    <span class="btn-label">Ï∂îÍ∞Ä</span>
                </button>
                <button class="mobile-btn submit-mobile-btn" onclick="submitBurger()">
                    <span class="btn-icon">üì¶</span>
                    <span class="btn-label">Ìè¨Ïû•</span>
                </button>
            </div>
        </div>

        <div id="gameClearScreen" class="screen hidden">
            <div class="clear-content">
                <h1 class="clear-title">üéâ CLEAR! üéâ</h1>
                <div class="clear-message">Î™©Ìëú Îã¨ÏÑ±! 100ÏõêÏùÑ Î≤åÏóàÏäµÎãàÎã§!</div>
                <div class="final-stats">
                    <div class="stat">
                        <div class="stat-label">Ï¥ù ÏàòÏùµ</div>
                        <div class="stat-value" id="clearScore">100Ïõê</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Î†àÎ≤®</div>
                        <div class="stat-value" id="clearLevel">1</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">ÏôÑÏÑ±Ìïú ÌñÑÎ≤ÑÍ±∞</div>
                        <div class="stat-value" id="clearBurgers">0</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">ÏµúÍ≥† ÏΩ§Î≥¥</div>
                        <div class="stat-value" id="clearMaxCombo">0</div>
                    </div>
                </div>
                <button class="restart-btn" onclick="restartGame()">üîÑ Îã§Ïãú ÌïòÍ∏∞</button>
                <button class="hall-of-fame-btn" onclick="showHallOfFame()">üèÜ Î™ÖÏòàÏùò Ï†ÑÎãπ</button>
            </div>
        </div>

        <div id="gameOverScreen" class="screen hidden">
            <div class="gameover-content">
                <h1 class="gameover-title">GAME OVER</h1>
                <div class="final-stats">
                    <div class="stat">
                        <div class="stat-label">Ï¥ù ÏàòÏùµ</div>
                        <div class="stat-value" id="finalScore">0Ïõê</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">Î†àÎ≤®</div>
                        <div class="stat-value" id="finalLevel">1</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">ÏôÑÏÑ±Ìïú ÌñÑÎ≤ÑÍ±∞</div>
                        <div class="stat-value" id="totalBurgers">0</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">ÏµúÍ≥† ÏΩ§Î≥¥</div>
                        <div class="stat-value" id="maxCombo">0</div>
                    </div>
                </div>
                <button class="restart-btn" onclick="restartGame()">üîÑ Îã§Ïãú ÌïòÍ∏∞</button>
                <button class="hall-of-fame-btn" onclick="showHallOfFame()">üèÜ Î™ÖÏòàÏùò Ï†ÑÎãπ</button>
            </div>
        </div>

        <div id="hallOfFameScreen" class="screen hidden">
            <div class="hall-of-fame-content">
                <h1 class="hall-of-fame-title">üèÜ Î™ÖÏòàÏùò Ï†ÑÎãπ üèÜ</h1>
                <div class="hall-of-fame-list" id="hallOfFameList">
                    <!-- Î™ÖÏòàÏùò Ï†ÑÎãπ Ìï≠Î™©Îì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê® -->
                </div>
                <button class="back-btn" onclick="backToStart()">‚Üê Ï≤òÏùåÏúºÎ°ú</button>
            </div>
        </div>
    </div>

    <script>
let gameState = {
    nickname: '',
    score: 0,
    level: 1,
    combo: 0,
    maxCombo: 0,
    totalBurgers: 0,
    mistakes: 0,
    usedRecipes: [],
    currentOrder: [],
    currentSides: [],
    playerBurger: [],
    playerSides: [],
    selectedIngredientIndex: 0,
    isPlaying: false,
    patienceTimer: null,
    patienceValue: 100,
    patienceDecreaseRate: 1.2
};

const ingredients = [
    { id: 'bun', name: 'Îπµ', icon: 'üü§', visual: 'üçû' },
    { id: 'patty', name: 'Ìå®Ìã∞', icon: 'üü´', visual: 'ü•©' },
    { id: 'cheese', name: 'ÏπòÏ¶à', icon: 'üü®', visual: 'üßÄ' },
    { id: 'lettuce', name: 'ÏñëÏÉÅÏ∂î', icon: 'üü©', visual: 'ü•¨' },
    { id: 'tomato', name: 'ÌÜ†ÎßàÌÜ†', icon: 'üü•', visual: 'üçÖ' },
    { id: 'onion', name: 'ÏñëÌåå', icon: '‚¨ú', visual: 'üßÖ' },
    { id: 'pickle', name: 'ÌîºÌÅ¥', icon: 'üü¢', visual: 'ü•í' },
    { id: 'bacon', name: 'Î≤†Ïù¥Ïª®', icon: 'üüß', visual: 'ü•ì' },
    { id: 'egg', name: 'Í≥ÑÎûÄ', icon: 'üü°', visual: 'üç≥' }
];

const sideItems = [
    { id: 'cola', name: 'ÏΩúÎùº', visual: 'ü•§' },
    { id: 'fries', name: 'Í∞êÏûêÌäÄÍπÄ', visual: 'üçü' },
    { id: 'salad', name: 'ÏÉêÎü¨Îìú', visual: 'ü•ó' }
];

const recipes = [
    ['bun', 'lettuce', 'patty', 'cheese', 'tomato', 'bun'],
    ['bun', 'onion', 'lettuce', 'patty', 'cheese', 'tomato', 'bun'],
    ['bun', 'pickle', 'cheese', 'patty', 'lettuce', 'tomato', 'bun'],
    ['bun', 'lettuce', 'bacon', 'cheese', 'patty', 'tomato', 'bun'],
    ['bun', 'patty', 'bacon', 'cheese', 'lettuce', 'bun'],
    ['bun', 'pickle', 'patty', 'egg', 'cheese', 'bun'],
    ['bun', 'lettuce', 'tomato', 'onion', 'pickle', 'cheese', 'bun'],
    ['bun', 'bacon', 'bacon', 'cheese', 'egg', 'lettuce', 'bun'],
    ['bun', 'onion', 'patty', 'tomato', 'lettuce', 'pickle', 'bun'],
    ['bun', 'cheese', 'bacon', 'patty', 'egg', 'cheese', 'bun'],
    ['bun', 'pickle', 'onion', 'patty', 'cheese', 'bacon', 'lettuce', 'tomato', 'bun'],
    ['bun', 'patty', 'cheese', 'patty', 'bacon', 'egg', 'lettuce', 'onion', 'bun'],
    ['bun', 'lettuce', 'pickle', 'patty', 'cheese', 'bacon', 'tomato', 'egg', 'bun'],
    ['bun', 'onion', 'tomato', 'patty', 'bacon', 'cheese', 'lettuce', 'pickle', 'egg', 'bun'],
    ['bun', 'bacon', 'patty', 'egg', 'cheese', 'onion', 'lettuce', 'tomato', 'pickle', 'bun'],
    ['bun', 'patty', 'cheese', 'patty', 'bacon', 'cheese', 'egg', 'lettuce', 'tomato', 'onion', 'bun'],
    ['bun', 'pickle', 'pickle', 'onion', 'lettuce', 'patty', 'cheese', 'bacon', 'tomato', 'egg', 'patty', 'bun'],
    ['bun', 'cheese', 'bacon', 'patty', 'egg', 'cheese', 'patty', 'lettuce', 'onion', 'tomato', 'bacon', 'bun'],
    ['bun', 'bacon', 'egg', 'patty', 'cheese', 'pickle', 'onion', 'lettuce', 'tomato', 'bacon', 'cheese', 'patty', 'bun'],
    ['bun', 'lettuce', 'onion', 'pickle', 'patty', 'cheese', 'bacon', 'egg', 'tomato', 'cheese', 'patty', 'lettuce', 'bun'],
    ['bun', 'pickle', 'patty', 'cheese', 'bacon', 'egg', 'onion', 'patty', 'cheese', 'lettuce', 'tomato', 'bacon', 'pickle', 'bun'],
    ['bun', 'onion', 'bacon', 'patty', 'cheese', 'egg', 'lettuce', 'pickle', 'tomato', 'patty', 'cheese', 'bacon', 'onion', 'lettuce', 'bun'],
    ['bun', 'cheese', 'patty', 'bacon', 'pickle', 'egg', 'onion', 'lettuce', 'cheese', 'patty', 'tomato', 'bacon', 'egg', 'cheese', 'bun'],
    ['bun', 'lettuce', 'pickle', 'onion', 'tomato', 'patty', 'cheese', 'bacon', 'egg', 'patty', 'cheese', 'lettuce', 'bacon', 'pickle', 'onion', 'bun']
];

const customerAvatars = [
    { name: 'ÏßÅÏû•Ïù∏', skinTone: '#FFE4C4', shirtColor: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)', hair: 'short', hairColor: '#4A3728', accessory: 'glasses' },
    { name: 'ÌïôÏÉù', skinTone: '#FFDAB9', shirtColor: 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)', hair: 'ponytail', hairColor: '#8B4513', accessory: 'ribbon' },
    { name: 'ÏöîÎ¶¨ÏÇ¨', skinTone: '#F5DEB3', shirtColor: 'linear-gradient(135deg, #FFFFFF 0%, #E8E8E8 100%)', hair: 'short', hairColor: '#654321', accessory: 'hat' },
    { name: 'Ïö¥ÎèôÏÑ†Ïàò', skinTone: '#DEB887', shirtColor: 'linear-gradient(135deg, #fa709a 0%, #fee140 100%)', hair: 'sporty', hairColor: '#2C1810', accessory: 'headband' },
    { name: 'ÏïÑÌã∞Ïä§Ìä∏', skinTone: '#FFDAB9', shirtColor: 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)', hair: 'messy', hairColor: '#C4A57B', accessory: 'beret' },
    { name: 'Ìï†Î®∏Îãà', skinTone: '#F5DEB3', shirtColor: 'linear-gradient(135deg, #d299c2 0%, #fef9d7 100%)', hair: 'bun', hairColor: '#C0C0C0', accessory: 'glasses' },
    { name: 'ÌûôÏä§ÌÑ∞', skinTone: '#E8C5A0', shirtColor: 'linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)', hair: 'undercut', hairColor: '#8B7355', accessory: 'beard' },
    { name: 'ÌïôÏÉù2', skinTone: '#FFE4C4', shirtColor: 'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)', hair: 'bob', hairColor: '#6B4423', accessory: 'bow' },
    { name: 'ÏÇ¨ÏóÖÍ∞Ä', skinTone: '#DEB887', shirtColor: 'linear-gradient(135deg, #2c3e50 0%, #34495e 100%)', hair: 'slick', hairColor: '#1C1C1C', accessory: 'tie' },
    { name: 'ÏïÑÏù¥', skinTone: '#FFDAB9', shirtColor: 'linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%)', hair: 'curly', hairColor: '#D2691E', accessory: 'cap' }
];

let currentCustomer = null;

const praiseMessages = [
    'ÎßõÏûàÏñ¥Ïöî! üòã',
    'ÏµúÍ≥†ÏòàÏöî! üåü',
    'ÏπúÏ†àÌï¥Ïöî! üíï',
    'Í∞êÏÇ¨Ìï¥Ïöî! üôè',
    'ÏôÑÎ≤ΩÌï¥Ïöî! ‚ú®',
    'Îã§Ïãú Ïò¨Í≤åÏöî! üëç',
    'Ï†ïÎßê ÎßõÏûàÎÑ§Ïöî! üòç'
];

function startGame() {
    const nicknameInput = document.getElementById('nicknameInput');
    const nickname = nicknameInput.value.trim();

    if (!nickname) {
        alert('ÏïåÎ∞îÏÉù ÎãâÎÑ§ÏûÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
        nicknameInput.focus();
        return;
    }

    if (nickname.length < 2) {
        alert('ÎãâÎÑ§ÏûÑÏùÄ 2Í∏ÄÏûê Ïù¥ÏÉÅ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!');
        nicknameInput.focus();
        return;
    }

    gameState = {
        nickname: nickname,
        score: 0,
        level: 1,
        combo: 0,
        maxCombo: 0,
        totalBurgers: 0,
        mistakes: 0,
        usedRecipes: [],
        currentOrder: [],
        currentSides: [],
        playerBurger: [],
        playerSides: [],
        selectedIngredientIndex: 0,
        isPlaying: true,
        patienceTimer: null,
        patienceValue: 100,
        patienceDecreaseRate: 1.2
    };

    showScreen('gameScreen');
    updateUI();
    renderIngredients();
    randomizeCustomer();
    generateNewOrder();
    setupKeyboardControls();
}

function showScreen(screenId) {
    document.querySelectorAll('.screen').forEach(screen => {
        screen.classList.add('hidden');
    });
    document.getElementById(screenId).classList.remove('hidden');
}

function renderIngredients() {
    const container = document.getElementById('ingredientsContainer');
    container.innerHTML = '';

    ingredients.forEach((ingredient, index) => {
        const slot = document.createElement('div');
        slot.className = 'ingredient-slot';
        if (index === gameState.selectedIngredientIndex) {
            slot.classList.add('selected');
        }

        slot.innerHTML = `
            <div class="ingredient-icon">${ingredient.visual}</div>
            <div class="ingredient-label">${ingredient.name}</div>
        `;

        slot.onclick = () => selectIngredient(index);
        container.appendChild(slot);
    });

    if (gameState.totalBurgers >= 4) {
        sideItems.forEach((item, index) => {
            const slot = document.createElement('div');
            slot.className = 'ingredient-slot side-slot';
            const sideIndex = ingredients.length + index;
            if (sideIndex === gameState.selectedIngredientIndex) {
                slot.classList.add('selected');
            }

            slot.innerHTML = `
                <div class="ingredient-icon">${item.visual}</div>
                <div class="ingredient-label">${item.name}</div>
            `;

            slot.onclick = () => selectIngredient(sideIndex);
            container.appendChild(slot);
        });
    }
}

function selectIngredient(index) {
    gameState.selectedIngredientIndex = index;
    renderIngredients();

    if (isMobile()) {
        addSelectedIngredient();
    }
}

function isMobile() {
    return window.innerWidth <= 768 ||
           ('ontouchstart' in window) ||
           (navigator.maxTouchPoints > 0);
}

function shuffleIngredients() {
    for (let i = ingredients.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [ingredients[i], ingredients[j]] = [ingredients[j], ingredients[i]];
    }

    gameState.selectedIngredientIndex = 0;
    renderIngredients();

    const container = document.getElementById('ingredientsContainer');
    container.style.animation = 'none';
    setTimeout(() => {
        container.style.animation = 'ingredientShuffle 0.5s ease';
    }, 10);
}

function randomizeCustomer() {
    currentCustomer = customerAvatars[Math.floor(Math.random() * customerAvatars.length)];

    const customerBody = document.querySelector('.customer-body');
    const customerFace = document.getElementById('customerFace');
    const customerHair = document.querySelector('.customer-hair');
    const customerAccessory = document.querySelector('.customer-accessory');

    if (customerBody) {
        customerBody.style.background = currentCustomer.shirtColor;
    }

    if (customerFace) {
        customerFace.style.setProperty('--skin-tone', currentCustomer.skinTone);
    }

    if (customerHair) {
        customerHair.className = 'customer-hair hair-' + currentCustomer.hair;
        customerHair.style.setProperty('--hair-color', currentCustomer.hairColor);
    }

    if (customerAccessory) {
        customerAccessory.className = 'customer-accessory accessory-' + currentCustomer.accessory;
    }
}

function logOrder() {
    console.log('\nüÜï ÏÉà Ï£ºÎ¨∏ ÏÉùÏÑ±Îê®:');
    console.log('ÌñÑÎ≤ÑÍ±∞:', gameState.currentOrder.map(id => {
        const ing = ingredients.find(i => i.id === id);
        return ing ? `${ing.name}(${id})` : id;
    }));
    if (gameState.currentSides.length > 0) {
        console.log('ÏÇ¨Ïù¥Îìú:', gameState.currentSides.map(id => {
            const side = sideItems.find(s => s.id === id);
            return side ? `${side.name}(${id})` : id;
        }));
    }
    console.log('ÏôÑÎ£åÌïú ÌñÑÎ≤ÑÍ±∞ Ïàò:', gameState.totalBurgers);
    console.log('---\n');
}

function generateNewOrder() {
    let availableRecipes;
    if (gameState.level === 1) {
        availableRecipes = recipes.slice(0, 3);
    } else if (gameState.level === 2) {
        availableRecipes = recipes.slice(0, 5);
    } else if (gameState.level === 3) {
        availableRecipes = recipes.slice(2, 8);
    } else if (gameState.level <= 5) {
        availableRecipes = recipes.slice(4, 12);
    } else if (gameState.level <= 7) {
        availableRecipes = recipes.slice(6, 16);
    } else if (gameState.level <= 10) {
        availableRecipes = recipes.slice(10, 21);
    } else if (gameState.level <= 13) {
        availableRecipes = recipes.slice(15, 24);
    } else {
        availableRecipes = recipes.slice(20, 24);
    }

    const unusedRecipes = availableRecipes.filter((recipe, index) => {
        const recipeKey = JSON.stringify(recipe);
        return !gameState.usedRecipes.includes(recipeKey);
    });

    if (unusedRecipes.length === 0) {
        gameState.usedRecipes = [];
        gameState.currentOrder = [...availableRecipes[Math.floor(Math.random() * availableRecipes.length)]];
    } else {
        const randomRecipe = unusedRecipes[Math.floor(Math.random() * unusedRecipes.length)];
        gameState.currentOrder = [...randomRecipe];
    }

    gameState.usedRecipes.push(JSON.stringify(gameState.currentOrder));

    gameState.currentSides = [];
    if (gameState.totalBurgers >= 4) {
        if (Math.random() < 0.3) {
            const randomSide = sideItems[Math.floor(Math.random() * sideItems.length)];
            gameState.currentSides.push(randomSide.id);
        }
    }

    gameState.playerBurger = [];
    gameState.playerSides = [];
    gameState.patienceValue = 100;
    gameState.selectedIngredientIndex = 0;

    const customer = document.getElementById('customer');
    customer.style.animation = '';
    setTimeout(() => {
        customer.style.animation = 'customerEnter 0.5s ease';
    }, 10);

    renderOrder();
    renderPlayerBurger();
    renderIngredients();
    startPatienceTimer();
    updateCustomerFace('happy');
    randomizeCustomer();
    logOrder();
}

function renderOrder() {
    const orderBurger = document.getElementById('orderBurger');
    orderBurger.innerHTML = '';

    const burgerContainer = document.createElement('div');
    burgerContainer.style.display = 'flex';
    burgerContainer.style.flexDirection = 'row';
    burgerContainer.style.alignItems = 'center';
    burgerContainer.style.gap = '5px';

    gameState.currentOrder.forEach(ingredientId => {
        const ingredient = ingredients.find(ing => ing.id === ingredientId);

        const ingredientEl = document.createElement('div');
        ingredientEl.className = 'order-ingredient';
        ingredientEl.textContent = ingredient.visual;

        burgerContainer.appendChild(ingredientEl);
    });

    gameState.currentSides.forEach(sideId => {
        const side = sideItems.find(s => s.id === sideId);

        const sideEl = document.createElement('div');
        sideEl.className = 'order-ingredient order-side';
        sideEl.textContent = side.visual;

        burgerContainer.appendChild(sideEl);
    });

    orderBurger.appendChild(burgerContainer);
}

function renderPlayerBurger(isNewIngredient = false) {
    const burgerBuilding = document.getElementById('burgerBuilding');
    burgerBuilding.innerHTML = '';

    const burgerContainer = document.createElement('div');
    burgerContainer.style.display = 'flex';
    burgerContainer.style.flexDirection = 'column-reverse';
    burgerContainer.style.alignItems = 'center';

    gameState.playerBurger.forEach((ingredientId, index) => {
        const ingredient = ingredients.find(ing => ing.id === ingredientId);
        const ingredientEl = document.createElement('div');
        ingredientEl.className = 'building-ingredient';

        // ÎßàÏßÄÎßâ Ïû¨Î£åÏù¥Í≥† ÏÉàÎ°ú Ï∂îÍ∞ÄÎêú Í≤ΩÏö∞ÏóêÎßå Ïï†ÎãàÎ©îÏù¥ÏÖò Ï†ÅÏö©
        if (isNewIngredient && index === gameState.playerBurger.length - 1) {
            ingredientEl.classList.add('new-ingredient');
        }

        ingredientEl.textContent = ingredient.visual;
        burgerContainer.appendChild(ingredientEl);
    });

    burgerBuilding.appendChild(burgerContainer);

    if (gameState.playerSides.length > 0) {
        const sideContainer = document.createElement('div');
        sideContainer.style.display = 'flex';
        sideContainer.style.flexDirection = 'row';
        sideContainer.style.alignItems = 'center';
        sideContainer.style.gap = '10px';
        sideContainer.style.marginLeft = '20px';
        sideContainer.style.position = 'absolute';
        sideContainer.style.right = '50px';
        sideContainer.style.bottom = '30px';

        gameState.playerSides.forEach(sideId => {
            const side = sideItems.find(s => s.id === sideId);
            const sideEl = document.createElement('div');
            sideEl.className = 'building-ingredient building-side';
            sideEl.textContent = side.visual;
            sideContainer.appendChild(sideEl);
        });

        burgerBuilding.appendChild(sideContainer);
    }
}

function startPatienceTimer() {
    if (gameState.patienceTimer) {
        clearInterval(gameState.patienceTimer);
    }

    gameState.patienceTimer = setInterval(() => {
        gameState.patienceValue -= gameState.patienceDecreaseRate;

        if (gameState.patienceValue <= 0) {
            gameState.patienceValue = 0;
            clearInterval(gameState.patienceTimer);
            customerLeft();
        }

        updatePatienceBar();
    }, 110);
}

function updatePatienceBar() {
    const fill = document.getElementById('patienceFill');
    fill.style.width = gameState.patienceValue + '%';

    fill.classList.remove('warning', 'danger');
    if (gameState.patienceValue <= 30) {
        fill.classList.add('danger');
        updateCustomerFace('angry');
    } else if (gameState.patienceValue <= 60) {
        fill.classList.add('warning');
        updateCustomerFace('neutral');
    } else {
        updateCustomerFace('happy');
    }
}

function updateCustomerFace(mood) {
    const customerFace = document.getElementById('customerFace');
    customerFace.className = 'customer-face ' + mood;
}

function setupKeyboardControls() {
    document.addEventListener('keydown', handleKeyPress);
}

function handleKeyPress(e) {
    if (!gameState.isPlaying) return;

    switch(e.key) {
        case 'ArrowLeft':
            e.preventDefault();
            moveSelection(-1);
            break;
        case 'ArrowRight':
            e.preventDefault();
            moveSelection(1);
            break;
        case ' ':
            e.preventDefault();
            addSelectedIngredient();
            break;
        case 'Enter':
            e.preventDefault();
            submitBurger();
            break;
        case 'Backspace':
            e.preventDefault();
            undoIngredient();
            break;
    }
}

function moveSelection(direction) {
    gameState.selectedIngredientIndex += direction;

    const totalItems = gameState.totalBurgers >= 4
        ? ingredients.length + sideItems.length
        : ingredients.length;

    if (gameState.selectedIngredientIndex < 0) {
        gameState.selectedIngredientIndex = totalItems - 1;
    } else if (gameState.selectedIngredientIndex >= totalItems) {
        gameState.selectedIngredientIndex = 0;
    }

    renderIngredients();
}

function addSelectedIngredient() {
    if (gameState.selectedIngredientIndex < ingredients.length) {
        const selectedIngredient = ingredients[gameState.selectedIngredientIndex];
        gameState.playerBurger.push(selectedIngredient.id);
        console.log('ÌñÑÎ≤ÑÍ±∞ Ïû¨Î£å Ï∂îÍ∞Ä:', selectedIngredient.id);
    } else {
        const sideIndex = gameState.selectedIngredientIndex - ingredients.length;
        const selectedSide = sideItems[sideIndex];
        gameState.playerSides.push(selectedSide.id);
        console.log('ÏÇ¨Ïù¥Îìú Ïû¨Î£å Ï∂îÍ∞Ä:', selectedSide.id);
    }

    renderPlayerBurger(true);

    const slot = document.querySelectorAll('.ingredient-slot')[gameState.selectedIngredientIndex];
    if (slot) {
        slot.style.transform = 'scale(1.2)';
        setTimeout(() => {
            slot.style.transform = '';
        }, 200);
    }
}

function undoIngredient() {
    if (gameState.playerSides.length > 0) {
        gameState.playerSides.pop();
    } else if (gameState.playerBurger.length > 0) {
        gameState.playerBurger.pop();
    }
    renderPlayerBurger();
}

function submitBurger() {
    if (gameState.playerBurger.length === 0) {
        return;
    }

    console.log('\n========== Ï†úÏ∂ú ==========');
    console.log('üìã Ï£ºÎ¨∏:');
    console.log('  ÌñÑÎ≤ÑÍ±∞:', gameState.currentOrder.map(id => {
        const ing = ingredients.find(i => i.id === id);
        return ing ? `${ing.name}(${id})` : id;
    }));
    if (gameState.currentSides.length > 0) {
        console.log('  ÏÇ¨Ïù¥Îìú:', gameState.currentSides.map(id => {
            const side = sideItems.find(s => s.id === id);
            return side ? `${side.name}(${id})` : id;
        }));
    }
    console.log('\nüë®‚Äçüç≥ Ï†úÏûë:');
    console.log('  ÌñÑÎ≤ÑÍ±∞:', gameState.playerBurger.map(id => {
        const ing = ingredients.find(i => i.id === id);
        return ing ? `${ing.name}(${id})` : id;
    }));
    if (gameState.playerSides.length > 0) {
        console.log('  ÏÇ¨Ïù¥Îìú:', gameState.playerSides.map(id => {
            const side = sideItems.find(s => s.id === id);
            return side ? `${side.name}(${id})` : id;
        }));
    }
    console.log('==========================\n');

    clearInterval(gameState.patienceTimer);

    const result = checkBurgerAccuracy();

    if (result.perfect) {
        handlePerfectBurger();
    } else if (result.correct) {
        handleCorrectBurger(result);
    } else {
        handleWrongBurger();
    }

    if (result.perfect || result.correct) {
        setTimeout(() => {
            if (gameState.isPlaying) {
                const customer = document.getElementById('customer');
                customer.style.animation = 'customerLeaveHappy 0.6s ease-out';

                setTimeout(() => {
                    gameState.totalBurgers++;
                    checkLevelUp();

                    if (gameState.totalBurgers % 3 === 0) {
                        shuffleIngredients();
                    }

                    customer.style.animation = '';
                    generateNewOrder();
                }, 600);
            }
        }, 800);
    }
}

function checkBurgerAccuracy() {
    console.log('=== ÌñÑÎ≤ÑÍ±∞ Ï≤¥ÌÅ¨ ===');
    console.log('Ï£ºÎ¨∏ ÌñÑÎ≤ÑÍ±∞:', gameState.currentOrder);
    console.log('Ï†úÏûë ÌñÑÎ≤ÑÍ±∞:', gameState.playerBurger);

    if (gameState.playerBurger.length !== gameState.currentOrder.length) {
        console.log('ÌñÑÎ≤ÑÍ±∞ Í∞úÏàò Î∂àÏùºÏπò');
        return { perfect: false, correct: false, accuracy: 0 };
    }

    let correctCount = 0;
    for (let i = 0; i < gameState.currentOrder.length; i++) {
        if (gameState.playerBurger[i] === gameState.currentOrder[i]) {
            correctCount++;
        } else {
            console.log(`Ïû¨Î£å ${i} Î∂àÏùºÏπò: ${gameState.playerBurger[i]} !== ${gameState.currentOrder[i]}`);
        }
    }

    const burgerAccuracy = correctCount / gameState.currentOrder.length;
    console.log('ÌñÑÎ≤ÑÍ±∞ Ï†ïÌôïÎèÑ:', burgerAccuracy);

    console.log('=== ÏÇ¨Ïù¥Îìú Ï≤¥ÌÅ¨ ===');
    console.log('Ï£ºÎ¨∏ ÏÇ¨Ïù¥Îìú:', gameState.currentSides);
    console.log('Ï†úÏûë ÏÇ¨Ïù¥Îìú:', gameState.playerSides);

    let sidesCorrect = true;
    if (gameState.currentSides.length !== gameState.playerSides.length) {
        console.log('ÏÇ¨Ïù¥Îìú Í∞úÏàò Î∂àÏùºÏπò');
        sidesCorrect = false;
    } else {
        for (let i = 0; i < gameState.currentSides.length; i++) {
            if (gameState.currentSides[i] !== gameState.playerSides[i]) {
                console.log(`ÏÇ¨Ïù¥Îìú ${i} Î∂àÏùºÏπò: ${gameState.playerSides[i]} !== ${gameState.currentSides[i]}`);
                sidesCorrect = false;
                break;
            }
        }
    }

    console.log('ÏÇ¨Ïù¥Îìú Ï†ïÌôï:', sidesCorrect);

    const isPerfect = burgerAccuracy === 1 && sidesCorrect;
    const isCorrect = burgerAccuracy >= 0.7 && sidesCorrect;

    console.log('Í≤∞Í≥º - Perfect:', isPerfect, 'Correct:', isCorrect);

    return {
        perfect: isPerfect,
        correct: isCorrect,
        accuracy: burgerAccuracy,
        hasSide: gameState.currentSides.length > 0
    };
}

function handlePerfectBurger() {
    gameState.combo++;

    if (gameState.combo > gameState.maxCombo) {
        gameState.maxCombo = gameState.combo;
    }

    let tip;
    if (gameState.currentSides.length > 0) {
        tip = Math.floor(Math.random() * 11) + 10;
    } else {
        tip = Math.floor(Math.random() * 6) + 5;
    }
    gameState.score += tip;

    updateCustomerFace('happy');

    const praise = praiseMessages[Math.floor(Math.random() * praiseMessages.length)];
    showPraiseBubble(praise);

    showTipAnimation(tip);

    const customerFace = document.getElementById('customerFace');
    customerFace.style.transform = 'scale(1.1)';
    setTimeout(() => {
        customerFace.style.transform = '';
    }, 500);

    updateUI();
}

function handleCorrectBurger(result) {
    let baseTip;
    if (result.hasSide) {
        baseTip = Math.floor(Math.random() * 11) + 10;
    } else {
        baseTip = Math.floor(Math.random() * 6) + 5;
    }
    const tip = Math.max(result.hasSide ? 10 : 5, Math.floor(baseTip * result.accuracy));
    gameState.score += tip;

    updateCustomerFace('happy');

    const goodMessages = ['Í¥úÏ∞ÆÏïÑÏöî üëå', 'Ï¢ãÏïÑÏöî! üòä', 'Í∞êÏÇ¨Ìï¥Ïöî üôÇ'];
    const praise = goodMessages[Math.floor(Math.random() * goodMessages.length)];
    showPraiseBubble(praise);

    showTipAnimation(tip);
    updateUI();
}

function handleWrongBurger() {
    gameState.combo = 0;
    gameState.mistakes++;

    if (gameState.mistakes >= 2) {
        updateCustomerFace('angry');

        const customer = document.getElementById('customer');
        customer.style.animation = 'customerLeave 1s ease-out forwards';

        setTimeout(() => {
            gameOver();
        }, 1000);
    } else {
        updateCustomerFace('neutral');

        const warningMessages = ['Ï°∞Ïã¨ÌïòÏÑ∏Ïöî! ‚ö†Ô∏è', 'Ìïú Î≤àÎßå Îçî ÌãÄÎ¶¨Î©¥...üò∞', 'Îã§Ïãú Ìï¥Ï£ºÏÑ∏Ïöî! üôè'];
        const warning = warningMessages[Math.floor(Math.random() * warningMessages.length)];
        showPraiseBubble(warning);

        setTimeout(() => {
            if (gameState.isPlaying) {
                const customer = document.getElementById('customer');
                customer.style.animation = 'customerLeaveHappy 0.6s ease-out';

                setTimeout(() => {
                    customer.style.animation = '';
                    generateNewOrder();
                }, 600);
            }
        }, 800);
    }
}

function showPraiseBubble(message) {
    const customerArea = document.querySelector('.customer-area');
    const bubbleEl = document.createElement('div');
    bubbleEl.className = 'praise-bubble';
    bubbleEl.textContent = message;

    customerArea.appendChild(bubbleEl);

    setTimeout(() => {
        bubbleEl.remove();
    }, 2000);
}

function showTipAnimation(tip) {
    const customerArea = document.querySelector('.customer-area');
    const tipEl = document.createElement('div');
    tipEl.className = 'tip-animation';
    tipEl.textContent = 'üí∞ +' + tip + 'Ïõê';

    customerArea.appendChild(tipEl);

    setTimeout(() => {
        tipEl.remove();
    }, 2000);
}

function customerLeft() {
    gameState.combo = 0;
    gameState.mistakes++;

    if (gameState.mistakes >= 2) {
        updateCustomerFace('angry');

        const customer = document.getElementById('customer');
        customer.style.animation = 'customerLeave 1s ease-out forwards';

        setTimeout(() => {
            gameOver();
        }, 1000);
    } else {
        updateCustomerFace('angry');

        const warningMessages = ['Îπ®Î¶¨ Ìï¥Ï£ºÏÑ∏Ïöî! ‚è∞', 'ÏãúÍ∞ÑÏù¥ ÏóÜÏñ¥Ïöî! üò§', 'ÏÑúÎëêÎ•¥ÏÑ∏Ïöî! üí¢'];
        const warning = warningMessages[Math.floor(Math.random() * warningMessages.length)];
        showPraiseBubble(warning);

        setTimeout(() => {
            if (gameState.isPlaying) {
                const customer = document.getElementById('customer');
                customer.style.animation = 'customerLeave 0.6s ease-out';

                setTimeout(() => {
                    customer.style.animation = '';
                    generateNewOrder();
                }, 600);
            }
        }, 800);
    }
}

function checkLevelUp() {
    const burgersNeeded = gameState.level * 2;

    if (gameState.totalBurgers >= burgersNeeded) {
        gameState.level++;

        if (gameState.level <= 3) {
            gameState.patienceDecreaseRate += 0.2;
        } else if (gameState.level <= 6) {
            gameState.patienceDecreaseRate += 0.3;
        } else if (gameState.level <= 10) {
            gameState.patienceDecreaseRate += 0.4;
        } else {
            gameState.patienceDecreaseRate += 0.5;
        }

        const customerFace = document.getElementById('customerFace');
        customerFace.style.transform = 'scale(1.2) rotate(5deg)';
        setTimeout(() => {
            customerFace.style.transform = '';
        }, 1000);
    }
}

function updateUI() {
    document.getElementById('scoreValue').textContent = gameState.score + 'Ïõê';
    document.getElementById('levelValue').textContent = gameState.level;
    document.getElementById('comboValue').textContent = gameState.combo;

    if (gameState.score >= 100) {
        gameState.isPlaying = false;
        clearInterval(gameState.patienceTimer);
        document.removeEventListener('keydown', handleKeyPress);
        setTimeout(() => {
            showGameClear();
        }, 1000);
    }
}

function gameOver() {
    gameState.isPlaying = false;
    clearInterval(gameState.patienceTimer);
    document.removeEventListener('keydown', handleKeyPress);

    saveToHallOfFame();

    showScreen('gameOverScreen');

    document.getElementById('finalScore').textContent = gameState.score + 'Ïõê';
    document.getElementById('finalLevel').textContent = gameState.level;
    document.getElementById('totalBurgers').textContent = gameState.totalBurgers;
    document.getElementById('maxCombo').textContent = gameState.maxCombo;
}

function showGameClear() {
    saveToHallOfFame();

    showScreen('gameClearScreen');

    document.getElementById('clearScore').textContent = gameState.score + 'Ïõê';
    document.getElementById('clearLevel').textContent = gameState.level;
    document.getElementById('clearBurgers').textContent = gameState.totalBurgers;
    document.getElementById('clearMaxCombo').textContent = gameState.maxCombo;
}

function restartGame() {
    showScreen('startScreen');
}

function saveToHallOfFame() {
    const record = {
        nickname: gameState.nickname,
        score: gameState.score,
        level: gameState.level,
        totalBurgers: gameState.totalBurgers,
        maxCombo: gameState.maxCombo,
        date: new Date().toISOString()
    };

    let hallOfFame = JSON.parse(localStorage.getItem('burgerGameHallOfFame') || '[]');
    hallOfFame.push(record);

    hallOfFame.sort((a, b) => b.score - a.score);

    hallOfFame = hallOfFame.slice(0, 50);

    localStorage.setItem('burgerGameHallOfFame', JSON.stringify(hallOfFame));
}

function showHallOfFame() {
    showScreen('hallOfFameScreen');
    renderHallOfFame();
}

function renderHallOfFame() {
    const hallOfFameList = document.getElementById('hallOfFameList');
    const hallOfFame = JSON.parse(localStorage.getItem('burgerGameHallOfFame') || '[]');

    if (hallOfFame.length === 0) {
        hallOfFameList.innerHTML = '<div class="empty-hall-of-fame">ÏïÑÏßÅ Í∏∞Î°ùÏù¥ ÏóÜÏäµÎãàÎã§.<br>Ï≤´ Î≤àÏß∏ ÏïåÎ∞îÏÉùÏù¥ ÎêòÏñ¥Î≥¥ÏÑ∏Ïöî! üçî</div>';
        return;
    }

    hallOfFameList.innerHTML = hallOfFame.map((record, index) => {
        const rank = index + 1;
        let rankClass = '';
        let rankEmoji = '';

        if (rank === 1) {
            rankClass = 'first';
            rankEmoji = 'ü•á';
        } else if (rank === 2) {
            rankClass = 'second';
            rankEmoji = 'ü•à';
        } else if (rank === 3) {
            rankClass = 'third';
            rankEmoji = 'ü•â';
        } else {
            rankEmoji = `#${rank}`;
        }

        const date = new Date(record.date);
        const dateStr = `${date.getMonth() + 1}/${date.getDate()}`;

        return `
            <div class="hall-of-fame-item">
                <div class="hall-of-fame-rank ${rankClass}">${rankEmoji}</div>
                <div class="hall-of-fame-info">
                    <div class="hall-of-fame-name">${record.nickname}</div>
                    <div class="hall-of-fame-stats">
                        <div class="hall-of-fame-stat">üí∞ ${record.score}Ïõê</div>
                        <div class="hall-of-fame-stat">üìä Lv.${record.level}</div>
                        <div class="hall-of-fame-stat">üçî ${record.totalBurgers}Í∞ú</div>
                        <div class="hall-of-fame-stat">üî• ${record.maxCombo} ÏΩ§Î≥¥</div>
                        <div class="hall-of-fame-stat">üìÖ ${dateStr}</div>
                    </div>
                </div>
            </div>
        `;
    }).join('');
}

function backToStart() {
    showScreen('startScreen');
}

console.log('üçî ÌñÑÎ≤ÑÍ±∞ Í∞ÄÍ≤å Í≤åÏûÑ Ï§ÄÎπÑ ÏôÑÎ£å!');
    </script>
</body>
</html>
